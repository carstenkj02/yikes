<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>{{title}}</title>
		<meta name="description" content="Simple FileSharing Service">
		<meta name="author" content="Nyxiative">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
	</head>
	<body ondragstart="dragStartHandler(event);" ondrop="dropHandler(event);" ondragover="dragOverHandler(event);">
		<form action="{{webroot}}/upload" method="post" enctype="multipart/form-data">
			<h1>NyxShare</h1>
			<p>This is a site for sharing files or code/text snippets.</p>
			<p>Paste your code in the textbox or upload a file, choose the language if you're uploading code. 
			You'll get back an easy-shareable sharable link.</p>
			<p>You can upload files with curl to the url <code>https://share.nyx.xyz/upload/api</code> with the 
			parameters <code>file</code>, containing either the content or the file, and then <code>public</code>, 
			<code>protected</code>, and <code>no_preview</code> based on what flags you want, and finally 
			the <code>language</code> field, set to one of the values found on the <code>/languages/api</code> endpoint.</p>
			<p>You can view code snippets without syntax highlighting by adding <code>/raw</code> after the hash
			in the url.</p>
			<textarea aria-label="Text input for upload" maxlength="128000000" cols="120" rows="14" name="file" onkeydown="document.getElementById('file').value = ''" id="textFile" placeholder="Enter text to upload here"></textarea><br />
			<label for="file">Or upload a file</label>
			<input type="file" name="file" id="file" onchange="document.getElementById('textFile').value = ''" />
			<label for="language">Language for code highlighting</label>
			<select name="language" id="language">
				{{#each languages}}
				{{#if (eq this "Plain text")}}
				<option selected value={{this}}>{{this}}</option>
				{{else}}
				<option value={{this}}>{{this}}</option>
				{{/if}}
				{{/each}}
			</select>
			<br />
			<input type="checkbox" name="public" id="public" checked />
			<label for="public">Public File?</label><br />
			<span>Should the file be index, in the public file repository (Public repository not yet added)</span><br />
			<input type="checkbox" name="protected" id="protected" />
			<label for="protected">Protected File?</label><br />
			<span>Should the file be protected with a password, this means that the file will require a ?password=PASSWORD to access (Password is autogenerated, Files are NOT encrypted)</span><br />
			<input type="checkbox" name="no_preview" id="no_preview" />
			<label for="no_preview">Disable Preview?</label><br />
			<span>Should people be able to preview the file (View PDF/Image/Audio... in the browser), this doesn't affect non-previewable files anyway</span><br /><br />
			<input type="submit" value="Submit" /><br />
			<h2>Links</h2>
			<a href="https://github.com/nyxiative/sfss">Star the project on Github</a><br />
			<a href="https://discordapp.com/users/233967347763904522">Discord @ Nyxiative#1337</a>
			<h2>Cool people</h2>
			<a href="https://twitch.tv/togglebit">ToggleBit</a><span> for advertising this site on his twitch page</span>
			<a href="https://twitch.tv/klassykat">KlassyKat</a><span> for advertising this site on his twitch page</span>
		</form>
		<script>
			function dragStartHandler(ev) {
				// Prevent default behavior (Prevent file from being opened)
				ev.preventDefault();
				ev.dataTransfer.setData("text", "mydata"); // Needed by Firefox
			}
			function dragOverHandler(ev) {
				// Prevent default behavior (Prevent file from being opened)
				ev.preventDefault();
			}

			function dropHandler(ev) {
				// Prevent default behavior (Prevent file from being opened)
				ev.preventDefault();

				document.getElementById("file").files = ev.dataTransfer.files;
			}
		</script>
	</body>
</html>
